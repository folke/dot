# vim: set ft=sshconfig:

# GitHub - optimized for git operations
Host github.com
	ControlMaster auto
	ControlPath ~/.ssh/control/%r@%h:%p
	ControlPersist 300
	# Reuse SSH connection for multiple git operations
	# Shorter persist time since git operations are quick

# Homelab - optimized for interactive sessions
Host 10.0.*
	ControlMaster auto
	ControlPath ~/.ssh/control/%r@%h:%p
	ControlPersist 3600
	# Longer persist for lab connections (1 hour)
	# Keep connections alive more aggressively
	ServerAliveInterval 15
	ServerAliveCountMax 3
	# Faster connection for repeated access
	Compression yes

Host *
	# Security: use modern key exchange algorithms
	KexAlgorithms curve25519-sha256,curve25519-sha256@libssh.org,diffie-hellman-group16-sha512,diffie-hellman-group18-sha512

	# Security: prefer modern ciphers
	Ciphers chacha20-poly1305@openssh.com,aes256-gcm@openssh.com,aes128-gcm@openssh.com,aes256-ctr,aes192-ctr,aes128-ctr

	# Security: modern MAC algorithms
	MACs hmac-sha2-512-etm@openssh.com,hmac-sha2-256-etm@openssh.com,hmac-sha2-512,hmac-sha2-256

  LogLevel ERROR

	# Use a shared channel for all sessions to the same host
	ControlMaster auto
	ControlPath ~/.ssh/control/%r@%h:%p
	ControlPersist 600

	# Keep connections alive (default for all)
	TCPKeepAlive yes
	ServerAliveInterval 60
	ServerAliveCountMax 10

	# Compression (useful for slow connections)
	Compression yes

	# Reuse SSH agent socket
	AddKeysToAgent yes

	# Hash known_hosts for privacy
	HashKnownHosts yes
